- [날짜와 시간 데이터 인덱싱 및 슬라이싱 방법](#날짜와-시간-데이터-인덱싱-및-슬라이싱-방법)
  - [**1. 날짜 순으로 정렬하기**](#1-날짜-순으로-정렬하기)
  - [**2. 날짜 범위로 데이터 슬라이싱하기**](#2-날짜-범위로-데이터-슬라이싱하기)
  - [**3. 날짜 필터링 예시**](#3-날짜-필터링-예시)
    - [3.1. **특정 날짜 이전의 데이터**](#31-특정-날짜-이전의-데이터)
    - [3.2. **특정 날짜 이후의 데이터**](#32-특정-날짜-이후의-데이터)
    - [3.3. **특정 연도/월의 데이터**](#33-특정-연도월의-데이터)
  - [**4. 요약**](#4-요약)

# 날짜와 시간 데이터 인덱싱 및 슬라이싱 방법

## **1. 날짜 순으로 정렬하기**

`sort_index()` 메서드를 사용하여 DataFrame의 인덱스를 기준으로 날짜순으로 데이터를 정렬할 수 있다. 날짜와 시간 데이터는 일반적으로 인덱스로 사용되기 때문에, 이 메서드를 사용하면 시간순으로 자동 정렬된다.

```python
import pandas as pd

# 날짜를 인덱스로 가진 DataFrame 생성
data = {
    'order_time': ['2022-10-17', '2021-05-25', '2023-01-01'],
    'amount': [200, 150, 300]
}
df = pd.DataFrame(data)
df['order_time'] = pd.to_datetime(df['order_time'])  # 문자열을 datetime으로 변환
df.set_index('order_time', inplace=True)  # 'order_time'을 인덱스로 설정

# 날짜순으로 정렬
df_sorted = df.sort_index()
print(df_sorted)

```

출력:

```
             amount
order_time
2021-05-25     150
2022-10-17     200
2023-01-01     300

```

- `sort_index()` 메서드는 기본적으로 오름차순으로 날짜를 정렬한다.

## **2. 날짜 범위로 데이터 슬라이싱하기**

`loc[]`를 사용하여 날짜 범위로 데이터를 슬라이싱할 수 있다. 이때, 날짜 범위의 끝값(오른쪽 끝)도 포함된다. 파이썬에서 일반적으로 슬라이싱할 때 오른쪽 끝 값은 포함되지 않지만, `pandas`에서는 날짜 슬라이싱 시 오른쪽 끝값도 포함되므로 주의가 필요하다.

`loc[]`로 날짜 범위를 지정할 때는 날짜 인덱스가 반드시 `datetime` 타입이어야 한다. 만약 인덱스가 문자열로 되어 있으면 `pd.to_datetime()`으로 날짜형으로 변환해주어야 한다.

```python
# 날짜 범위 슬라이싱 (2022-01-01부터 2022-12-31까지)
df_filtered = df.loc['2022-01-01':'2022-12-31']
print(df_filtered)

```

출력:

```
             amount
order_time
2022-10-17     200

```

- `df.loc['2015':'2017']`처럼 슬라이싱할 때, `2015`와 `2017`이 포함된다.
- 날짜 범위의 끝을 포함하려면 `pandas`의 슬라이싱 규칙을 기억해야 한다.

## **3. 날짜 필터링 예시**

`datetime` 형식의 데이터를 필터링할 때는 특정 날짜 이전, 이후, 혹은 특정 월/연도에 해당하는 데이터를 쉽게 추출할 수 있다.

### 3.1. **특정 날짜 이전의 데이터**

```python
df_before_2022 = df.loc[df.index < '2022-01-01']
print(df_before_2022)

```

### 3.2. **특정 날짜 이후의 데이터**

```python
df_after_2022 = df.loc[df.index >= '2022-01-01']
print(df_after_2022)

```

### 3.3. **특정 연도/월의 데이터**

```python
# 2022년의 데이터만 추출
df_2022 = df.loc['2022']
print(df_2022)

# 특정 월(예: 10월) 데이터 추출
df_october = df.loc['2022-10']
print(df_october)

```

## **4. 요약**

- `sort_index()`는 날짜순으로 정렬하는 데 사용된다.
- `loc[]`을 사용하여 날짜 범위로 데이터를 슬라이싱할 수 있으며, 오른쪽 끝값도 포함된다.
- 날짜를 필터링하거나 특정 주기별로 데이터를 요약할 수 있는 `resample()`도 유용하다.
- 날짜 범위 슬라이싱 시, 반드시 인덱스가 `datetime` 형식이어야 한다.
